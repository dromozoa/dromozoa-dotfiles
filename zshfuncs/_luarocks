#compdef luarocks

_luarocks() {
  local curcontext="$curcontext"
  local context state state_descr line
  typeset -A opt_args

  local -a commands
  __dromozoa_luarocks_commands
  local -a options
  __dromozoa_luarocks_general_options

  _arguments -C \
    $options \
    ": :->command" \
    "*:: :->argument"

  local result
  case x$state in
    xcommand) _describe commands commands;;
    xargument) _call_function result "_luarocks_$words[1]";;
  esac
}

_luarocks_help() {
  local curcontext="$curcontext"
  local context state state_descr line
  typeset -A opt_args

  local -a commands
  __dromozoa_luarocks_commands
  local -a options
  __dromozoa_luarocks_general_options

  _arguments -C \
    $options \
    ": :->command"

  case x$state in
    xcommand) _describe commands commands;;
  esac
}

_luarocks_remove() {
  local curcontext="$curcontext"
  local context state state_descr line
  typeset -A opt_args

  local -a options
  __dromozoa_luarocks_general_options

  _arguments -C \
    $options \
    "--force" \
    "--force-fast"
}
